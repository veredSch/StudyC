<!DOCTYPE html>
@using Microsoft.AspNetCore.Http
<html lang="en">
<head>

    <meta charset="utf-8" />
    <title>@ViewData["Title"] - StudyC</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />


    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="~/css/style_nav.css">
    @RenderSection("Css", required: false)


</head>
<body dir="rtl">
    @if (Context.Session.GetString("login") != null)
    {
        <div onload="alert('1');"></div>
    }
    <header>
        <div w3-include-html="/Users/LogIn"></div>

        <nav class="navbar">

            <span class="navbar-toggle" id="js-navbar-toggle">
                <i class="fas fa-bars"></i>
            </span>
            <a asp-controller="Home" asp-action="Index" class="logo"><img src="~/img/logo.png" width="60%" height="30%" alt="logo"></a>
            <ul class="main-nav" id="js-menu">
                <li>
                    <a asp-controller="Home" asp-action="Index" class="nav-links ">דף הבית</a>
                </li>
                <li>
                    <a asp-controller="Home" asp-action="About" class="nav-links">אודות</a>
                </li>
                <li>
                    <a asp-controller="Studies" asp-action="Index" class="nav-links">לימוד</a>
                </li>
                <li>
                    <a asp-controller="Contacts" asp-action="Create" class="nav-links">צור קשר</a>
                </li>
                <li>

                    <a class="nav-links" onclick="document.getElementById('id01').style.display='block'">הירשם/התחבר</a>
                </li>
                <li>
                    <form class="formNav" asp-controller="Studies" asp-action="Search">
                        <input class="inputNav" type="search" name="Search" placeholder="חיפוש">
                        <i class="fa fa-search"></i>
                    </form>
                </li>
            </ul>
        </nav>

    </header>


    <div class="container">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>

    <script>
        let mainNav = document.getElementById("js-menu");
        let navBarToggle = document.getElementById("js-navbar-toggle");

        navBarToggle.addEventListener("click", function () {
            mainNav.classList.toggle("active");
        });</script>


    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/all.js" crossorigin="anonymous"></script>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>


    <script>

        function includeHTML() {
            var z, i, elmnt, file, xhttp;
            /*loop through a collection of all HTML elements:*/
            z = document.getElementsByTagName("*");
            for (i = 0; i < z.length; i++) {
                elmnt = z[i];
                /*search for elements with a certain atrribute:*/
                file = elmnt.getAttribute("w3-include-html");
                if (file) {
                    /*make an HTTP request using the attribute value as the file name:*/
                    xhttp = new XMLHttpRequest();
                    xhttp.onreadystatechange = function () {
                        if (this.readyState == 4) {
                            if (this.status == 200) { elmnt.innerHTML = this.responseText; }
                            if (this.status == 404) { elmnt.innerHTML = "Page not found."; }
                            /*remove the attribute, and call this function once more:*/
                            elmnt.removeAttribute("w3-include-html");
                            includeHTML();
                        }
                    }
                    xhttp.open("GET", file, true);
                    xhttp.send();
                    /*exit the function:*/
                    return;
                }
            }
        };
    </script>


    <script>
        function log() {
            document.getElementById('id01').style.display = 'none';
            document.getElementById('id02').style.display = 'block';
        }


        function validateEmail(email) {
            const re = /^(([^<>()[\]\\.,;:\s@@"]+(\.[^<>()[\]\\.,;:\s@@"]+)*)|(".+"))@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(String(email).toLowerCase());
        }

        function sub(e) {
            var isValid = true;

            //var q = Enumerable.From(_Contex.User).where(u => u.Mail == document.getElementById('mail').value).select(u.Mail).ToArray();


            //if (q.length>0) {
            //    document.getElementById("errorS").innerHTML = "המשתמש קיים כבר";
            //    isValid = false;
            //}


            if (document.getElementById("username").value == "") {
                document.getElementById("errorU").innerHTML = "שם משתמש אינו חוקי";
                isValid = false;
            }
            if (!validateEmail(document.getElementById("mail").value)) {
                isValid = false;
                document.getElementById("errorM").innerHTML = "כתובת מייל אינה חוקית";
            }
            if (document.getElementById("password").value.length < 3) {
                isValid = false;
                document.getElementById("errorP").innerHTML = "סיסמא אינה חוקית";
            }
            if (!isValid) {
                e.preventDefault();
            }
            else
                alert("הרישום בוצע בהצלחה");

        }
    </script>
    <script>
        includeHTML();
    </script>


    @RenderSection("scripts", required: false)
</body>
</html>
